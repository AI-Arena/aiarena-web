{% extends "base.html" %}
{% load i18n core_filters wiki_tags humanize %}
{% load render_table from django_tables2 %}


{% block content %}
    <div class="divider">
        <span></span><span><h2>{{ competitionbotmatchupstats.bot.competition.as_html_link }} - {{ competitionbotmatchupstats.bot.bot.as_html_link }} vs {{ competitionbotmatchupstats.opponent.bot.as_html_link }}</h2></span><span></span>
    </div>
    <div id="bot_competition_stats">
        <table summary="Table containing competition participation information" style="text-align: right">
            <thead>
            <tr style="text-align: center">
                <td colspan="3"><strong>Stats</strong></td>
            </tr>
            </thead>
            <tbody>
            <tr class="mono">
                <td>Generated</td>
                <td colspan="2">{{ competitionbotmatchupstats.updated|naturaltime|shorten_naturaltime }}</td>
            </tr>
            <tr class="mono">
                <td>Matches</td>
                <td>{{ competitionbotmatchupstats.match_count }}</td>
                <td></td>
            </tr>
            <tr class="mono">
                <td>Wins</td>
                {% if competitionbotmatchupstats.win_perc != None %}
                    <td>{{ competitionbotmatchupstats.win_count }}</td>
                    <td>{{ competitionbotmatchupstats.win_perc|floatformat:2 }}%</td>
                {% else %}
                    <td colspan="2">No stats</td>
                {% endif %}
            </tr>
            <tr class="mono">
                <td>Losses</td>
                {% if competitionbotmatchupstats.loss_perc != None %}
                    <td>{{ competitionbotmatchupstats.loss_count }}</td>
                    <td>{{ competitionbotmatchupstats.loss_perc|floatformat:2 }}%</td>
                {% else %}
                    <td colspan="2">No stats</td>
                {% endif %}
            </tr>
            <tr class="mono">
                <td>Ties</td>
                {% if competitionbotmatchupstats.tie_perc != None %}
                    <td>{{ competitionbotmatchupstats.tie_count }}</td>
                    <td>{{ competitionbotmatchupstats.tie_perc|floatformat:2 }}%</td>
                {% else %}
                    <td colspan="2">No stats</td>
                {% endif %}
            </tr>
            <tr class="mono">
                <td>Crashes</td>
                {% if competitionbotmatchupstats.crash_perc != None %}
                    <td>{{ competitionbotmatchupstats.crash_count }}</td>
                    <td>{{ competitionbotmatchupstats.crash_perc|floatformat:2 }}%</td>
                {% else %}
                    <td colspan="2">No stats</td>
                {% endif %}
            </tr>

            </tbody>
        </table>
        <br/>
    </div>

    <div id="elo_graph">
        <img src="" alt="ELOGraph"/>
    </div>

    <div class="divider"><span></span><span><h2>Recent Matches</h2></span><span></span></div>
    <div id="bot_results">
        <button class="collapsible filter-form">Filters</button>
        <div class="collapsible-content filter-form" style="margin-bottom: 30px">
            <form method="get" class="flex-container" style="justify-content: left">
                {{ filter.form.non_field_errors }}
                <div class="flex-row-short" style="width: 13%">
                    {{ filter.form.race.errors }}
                    <label for="{{ filter.form.race.id_for_label }}">Race</label>
                    {{ filter.form.race }}
                </div>
                <div class="flex-row-short" style="width: 13%">
                    {{ filter.form.result.errors }}
                    <label for="{{ filter.form.result.id_for_label }}">Result</label>
                    {{ filter.form.result }}
                </div>
                <div class="flex-row-short" style="width: 22%">
                    {{ filter.form.result_cause.errors }}
                    <label for="{{ filter.form.result_cause.id_for_label }}">Cause</label>
                    {{ filter.form.result_cause }}
                </div>
                <div class="flex-row-short" style="width: 20%">
                    {{ filter.form.avg_step_time.errors }}
                    <label for="{{ filter.form.avg_step_time.id_for_label }}">Avg Step (ms)</label>
                    {{ filter.form.avg_step_time }}
                </div>
                <div class="flex-row-short" style="width: 24%">
                    {{ filter.form.map.errors }}
                    <label for="{{ filter.form.map.id_for_label }}">Map</label>
                    {{ filter.form.map }}
                </div>
                {% include "tagsinput/tagsinput.html" with form=filter.form %}
                <div class="flex-row-short" style="width: 35%">
                    <label for="{{ filter.form.tags_by_all.id_for_label }}">
                        {{ filter.form.tags_by_all }} Show and Search Everyone's Tags
                    </label>
                </div>
                <div class="flex-row-short">
                    <label for="{{ filter.form.tags_partial_match.id_for_label }}">
                        {{ filter.form.tags_partial_match }} Partially Match Tags
                    </label>
                </div>
                <div class="flex-row-half" style="width: 100%; padding-bottom: 25px">
                    <input id=submit-button type="submit" value="Filter"/>
                </div>
            </form>
        </div>
        {% render_table results_table %}
    </div>


{% endblock %}

